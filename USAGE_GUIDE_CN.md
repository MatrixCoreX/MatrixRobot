# MatrixCore 机器人使用说明

## 目录
- [用户命令](#用户命令)
  - [私聊命令](#私聊命令)
  - [群组命令](#群组命令)
- [管理员命令](#管理员命令)
- [功能说明](#功能说明)
- [配置说明](#配置说明)

---

## 用户命令

### 私聊命令

以下命令只能在私聊中使用，在群组中使用会提示"此命令只能在私聊中使用，请直接私聊机器人"。

#### 1. `/start` - 注册机器人并获取邀请链接

**用途**：首次使用机器人时注册账户，获取专属邀请链接

**使用方法**：
```
/start
```

**功能说明**：
- 创建用户账户（如果不存在）
- 如果通过邀请链接进入，会自动记录邀请关系
- 显示欢迎消息和专属邀请链接
- 邀请链接格式：`https://t.me/{bot_username}?start={your_telegram_id}`

**使用场景**：
- 新用户首次使用机器人
- 需要获取自己的邀请链接用于推广

---

#### 2. `/me` - 查看个人信息

**用途**：查看自己的积分、绑定信息、邀请人数等详细信息

**使用方法**：
```
/me
```

**显示内容**：
- Telegram ID
- 当前积分（总积分）
- 解锁积分（可用于转账的积分）
- 本月获得积分
- 币安 UID（如已绑定）
- X/Twitter 账号（如已绑定）
- 社区账户地址（如已绑定，根据配置显示）
- 邀请成功人数
- 专属邀请链接

**使用场景**：
- 查看当前积分状态
- 检查绑定信息是否正确
- 查看邀请统计

---

#### 3. `/bind` - 绑定账户（交互式）

**用途**：通过按钮选择要绑定的账户类型

**使用方法**：
```
/bind
```

**功能说明**：
- 显示绑定选项按钮：
  - 🔗 绑定币安 UID
  - 🧵 绑定 X 账号
  - 🅰️ 绑定社区账户（如果配置了 `COMMUNITY_ACCOUNT_NAME`）
- 点击按钮后会提示具体的绑定命令格式

**使用场景**：
- 不确定绑定命令格式时使用
- 需要绑定多个账户时

---

#### 4. `/bind_binance <UID>` - 绑定币安 UID

**用途**：绑定币安账户 UID

**使用方法**：
```
/bind_binance 12345678
```

**参数说明**：
- `<UID>`：币安 UID，必须是纯数字

**验证规则**：
- UID 必须是纯数字
- 如果格式不正确会提示错误

**使用场景**：
- 参与需要币安 UID 的活动
- 提交币安相关任务

---

#### 5. `/bind_twitter @handle` - 绑定 X/Twitter 账号

**用途**：绑定 X（原 Twitter）账号

**使用方法**：
```
/bind_twitter @yourhandle
```

**参数说明**：
- `@handle`：X/Twitter 用户名，必须以 `@` 开头

**验证规则**：
- 必须以 `@` 开头
- 如果格式不正确会提示错误

**使用场景**：
- 参与需要 Twitter 账号的活动
- 提交 Twitter 相关任务

---

#### 6. `/bind_address <address>` - 绑定社区账户地址

**用途**：绑定社区账户地址（如钱包地址等）

**使用方法**：
```
/bind_address your_address_here
```

**参数说明**：
- `<address>`：账户地址，可以是任意字符串

**注意事项**：
- 当前版本没有格式验证，建议输入正确的地址格式
- 地址会直接保存到数据库

**使用场景**：
- 绑定钱包地址
- 绑定其他社区账户

---

#### 7. `/invites` - 查看邀请信息

**用途**：查看邀请成功人数和专属邀请链接

**使用方法**：
```
/invites
```

**显示内容**：
- 邀请成功人数（已加入群组的被邀请人数）
- 专属邀请链接
- 加入群组按钮（如果配置了群组链接）

**奖励机制**：
- 被邀请人首次在群组签到后，邀请人会获得积分奖励（可配置 `INVITE_REWARD_POINTS`）

**使用场景**：
- 查看邀请推广效果
- 获取邀请链接用于推广

---

#### 8. `/submit` - 提交活动链接

**用途**：提交币安或 Twitter 文章链接参与活动

**使用方法**：
```
/submit
```

**操作流程**：
1. 发送 `/submit` 命令
2. 选择要参与的活动（从 `campaigns.json` 加载）
3. 选择提交类型（币安或 Twitter）
4. 输入或粘贴链接
5. 确认提交

**提交类型**：
- 币安文章链接
- Twitter 文章链接

**注意事项**：
- 每个活动每个类型只能提交一次
- 链接会被验证格式
- 提交后可以在 `/my_submissions` 中查看

**使用场景**：
- 参与社区活动
- 完成任务获得积分

---

#### 9. `/my_submissions` - 查看已提交的链接

**用途**：查看自己已提交的所有活动链接

**使用方法**：
```
/my_submissions
```

**显示内容**：
- 所有已提交的链接列表
- 每个链接显示：类型（币安/Twitter）、链接、活动 ID

**使用场景**：
- 检查提交记录
- 确认是否已提交

---

#### 10. `/price <symbol>` - 查询加密货币价格

**用途**：查询指定加密货币的当前价格

**使用方法**：
```
/price BTC
/price ETH
/price BNB
```

**参数说明**：
- `<symbol>`：加密货币交易对符号（如 BTC、ETH、BNB）

**功能说明**：
- 从配置的 API 获取实时价格
- 支持所有在交易所交易的币种
- API 地址可在 `config.jsonc` 中配置

**使用场景**：
- 查询币价
- 查看实时行情

---

#### 11. `/feedback <content>` - 反馈意见建议

**用途**：向管理员发送反馈、建议或问题

**使用方法**：
```
/feedback 这里输入你的反馈内容
```

**参数说明**：
- `<content>`：反馈内容，可以是任意文本

**功能说明**：
- 反馈内容会保存到 `feedback.csv` 文件
- 管理员可以通过 `/export_feedback` 导出查看

**使用场景**：
- 报告问题
- 提出建议
- 功能请求

---

#### 12. `/unlock_points <amount>` - 解锁积分

**用途**：将总积分中的一部分解锁，用于转账给其他用户

**使用方法**：
```
/unlock_points 100
```

**参数说明**：
- `<amount>`：要解锁的积分数量，必须是正整数

**功能说明**：
- 从总积分中扣除指定数量
- 将扣除的积分添加到解锁积分
- 解锁积分可以用于转账

**注意事项**：
- 解锁的积分不能直接转回总积分
- 确保有足够的积分可解锁

**使用场景**：
- 准备转账给其他用户
- 发送红包前解锁积分

---

#### 13. `/transfer_points <recipient_id> <amount>` - 直接转账

**用途**：直接向指定用户转账积分

**使用方法**：
```
/transfer_points 123456789 50
```

**参数说明**：
- `<recipient_id>`：接收方的 Telegram ID
- `<amount>`：转账积分数量，必须是正整数

**功能说明**：
- 从解锁积分中扣除
- 直接添加到接收方的总积分
- 记录转账日志

**注意事项**：
- 只能使用解锁积分转账
- 需要知道对方的 Telegram ID
- 转账不可撤销

**使用场景**：
- 快速转账给已知用户
- 不需要交互确认的转账

---

#### 14. `/transfer` - 交互式转账

**用途**：通过按钮交互方式进行积分转账

**使用方法**：
```
/transfer
```

**操作流程**：
1. 发送 `/transfer` 命令
2. 输入接收方的 Telegram ID
3. 输入转账金额
4. 确认转账信息
5. 完成转账

**功能说明**：
- 分步确认，减少误操作
- 显示转账详情供确认
- 转账记录会保存

**使用场景**：
- 需要确认的转账
- 不熟悉命令格式时使用

---

#### 15. `/transfers` - 查看转账记录

**用途**：查看自己的转账历史记录

**使用方法**：
```
/transfers
```

**显示内容**：
- 转账记录列表（最近记录）
- 每条记录显示：接收方 ID、转账金额、时间

**使用场景**：
- 查看转账历史
- 核对转账记录

---

#### 16. `/recent_points [limit]` - 查看最近额外加分记录

**用途**：查看最近获得的额外积分记录

**使用方法**：
```
/recent_points
/recent_points 20
```

**参数说明**：
- `[limit]`：可选，显示记录数量，默认 10 条，最大 50 条

**显示内容**：
- 最近额外加分的记录
- 每条记录显示：积分数量、原因、时间
- 最近 7 天总积分
- 最近 30 天总积分

**使用场景**：
- 查看积分获得记录
- 核对积分来源

---

#### 17. `/faq` - 常见问题

**用途**：查看常见问题解答

**使用方法**：
```
/faq
```

**功能说明**：
- 显示 FAQ 分类列表
- 点击分类查看该分类下的问题
- 点击问题查看详细答案
- FAQ 内容从 `faq.json` 文件加载

**使用场景**：
- 查找问题答案
- 了解功能使用方法

---

#### 18. `/help` - 帮助命令

**用途**：查看所有可用命令的说明

**使用方法**：
```
/help
```

**显示内容**：
- 用户命令列表（私聊）
- 群组命令列表
- 管理员命令列表（仅管理员可见）

**使用场景**：
- 查看所有可用命令
- 了解命令用途

---

### 群组命令

以下命令可以在指定的群组中使用（`ALLOWED_GROUP_ID`）。

#### 1. `/signinword` - 查看今日签到词

**用途**：查看今天的签到词

**使用方法**：
```
/signinword
```

**功能说明**：
- 显示今天的签到词
- 显示积分排行榜信息
- 显示连续签到奖励信息

**使用场景**：
- 忘记今天的签到词时查看
- 了解签到奖励规则

---

#### 2. `/ranking` - 查看积分排行榜

**用途**：查看本月积分排行榜

**使用方法**：
```
/ranking
```

**显示内容**：
- 本月积分排行榜（Top 10）
- 每个用户显示：排名、名称、积分
- 管理员不显示在排行榜中

**使用场景**：
- 查看积分排名
- 了解社区活跃度

---

#### 3. `/active` - 查看活跃度排行榜

**用途**：查看本月活跃度排行榜

**使用方法**：
```
/active
```

**显示内容**：
- 本月活跃度排行榜（Top 10）
- 活跃度基于积分计算，有最低积分要求（`MIN_ACTIVE_POINTS`）
- 管理员不显示在排行榜中

**使用场景**：
- 查看活跃用户排名
- 了解社区参与度

---

#### 4. `/price <symbol>` - 查询价格（群组版）

**用途**：在群组中查询加密货币价格

**使用方法**：
```
/price BTC
```

**功能说明**：
- 与私聊版本功能相同
- 结果会发送到群组中

---

#### 5. 每日签到

**用途**：通过发送签到词进行每日签到

**使用方法**：
在群组中发送当天的签到词（从 `signin_words.txt` 随机选择）

**功能说明**：
- 机器人每天会在指定时间（`SIGNIN_WORD_TIME`）发布签到词
- 用户发送匹配的签到词即可完成签到
- 签到成功获得积分（`SIGNIN_POINTS`）
- 连续签到 7 天有额外奖励（`SIGNIN_BONUS_POINTS`）
- 签到词会被置顶 5 分钟

**奖励机制**：
- 每日签到：获得基础积分
- 连续 7 天签到：获得额外奖励积分
- 首次群组签到：邀请人获得奖励积分

**使用场景**：
- 每日签到获得积分
- 参与社区活动

---

#### 6. 聊天积分

**用途**：在群组中聊天即可获得积分

**功能说明**：
- 发送文本消息即可获得积分（`CHAT_POINTS`）
- 有 1 分钟冷却时间，防止刷屏
- 管理员也可以获得聊天积分
- 如果 `CHAT_POINTS` 设置为 0，则禁用此功能

**使用场景**：
- 正常群组聊天
- 参与讨论

---

#### 7. 答题活动

**用途**：参与管理员发布的答题活动

**使用方法**：
管理员发布题目后，点击选项按钮选择答案

**功能说明**：
- 管理员通过 `/quiz_send` 发布题目
- 题目从 `quiz_bank.json` 随机选择
- 答对获得积分（`QUIZ_CORRECT_POINTS`）
- 每题只能回答一次
- 题目有效期为 30 分钟

**使用场景**：
- 参与社区答题活动
- 获得额外积分

---

#### 8. 红包功能

**用途**：发送和领取积分红包

**发送红包**：
```
/hongbao <total_points> <count>
或
/redpack <total_points> <count>
```

**参数说明**：
- `<total_points>`：红包总积分（必须是正整数）
- `<count>`：红包数量（分成几份，必须是正整数）

**领取红包**：
- 点击红包消息中的"领取"按钮
- 每个红包只能领取一次
- 积分随机分配
- 每个用户有防刷屏限制（1秒内不能重复点击）

**功能说明**：
- 使用解锁积分发送红包
- 红包积分随机分配给领取者
- 红包会显示发送者信息
- 红包有效期为 24 小时
- 24 小时后未领完的红包会自动过期
- 过期红包的剩余积分会自动退回给发包人的解锁积分

**红包规则**：
- 红包创建后 24 小时内有效
- 超过 24 小时未领取的红包会自动过期
- 过期后剩余积分会在每天指定时间（`REDPACKET_REFUND_TIME`，默认 01:00）自动退回给发包人
- 退回的积分会添加到发包人的解锁积分中
- 红包过期后无法再领取

**注意事项**：
- 发送红包前需要先解锁足够的积分
- 红包积分随机分配，最后一份会获得所有剩余积分
- 如果红包未领完，剩余积分会在过期后自动退回

**使用场景**：
- 庆祝活动
- 社区互动
- 积分分享

---

## 管理员命令

以下命令仅管理员可以使用（需要在 `config.jsonc` 的 `ADMIN_IDS` 中配置）。

### 积分管理

#### 1. `/add_points <user_id> <amount>` - 为用户加分

**用途**：为指定用户添加积分到总积分

**使用方法**：
```
/add_points 123456789 100
```

**参数说明**：
- `<user_id>`：用户的 Telegram ID
- `<amount>`：要添加的积分数量

**功能说明**：
- 直接添加到用户的总积分
- 操作会被记录到日志
- 敏感操作，需要谨慎使用

**使用场景**：
- 活动奖励
- 补偿积分
- 特殊奖励

---

#### 2. `/add_unlock_points <user_id> <amount>` - 为用户添加解锁积分

**用途**：为指定用户添加解锁积分（可用于转账）

**使用方法**：
```
/add_unlock_points 123456789 50
```

**参数说明**：
- `<user_id>`：用户的 Telegram ID
- `<amount>`：要添加的解锁积分数量

**功能说明**：
- 直接添加到用户的解锁积分
- 解锁积分可以用于转账
- 操作会被记录到日志

**使用场景**：
- 转账奖励
- 特殊解锁积分发放

---

#### 3. 批量加分（上传 CSV 文件）

**用途**：通过上传 CSV 文件批量为用户加分

**使用方法**：
1. 准备 CSV 文件，格式：
   ```csv
   telegram_id,points
   123456789,100
   987654321,50
   ```
2. 将文件命名为 `batch_points.csv`
3. 在私聊中发送文件给机器人

**功能说明**：
- 支持批量处理多个用户
- 自动验证用户 ID 和积分格式
- 操作会被记录到日志

**使用场景**：
- 大规模活动奖励
- 批量补偿
- 数据迁移

---

### 内容管理

#### 4. `/quiz_send [json]` - 发布答题

**用途**：在群组中发布答题活动

**使用方法**：
```
/quiz_send
```
或
```
/quiz_send {"question":"问题","options":["A.选项1","B.选项2"],"answer":0}
```

**功能说明**：
- 不带参数：从 `quiz_bank.json` 随机选择题目
- 带 JSON 参数：使用指定的题目
- 题目会在群组中发布，用户点击选项答题
- 答对获得积分，每题只能回答一次
- 题目有效期为 30 分钟

**题目格式**：
```json
{
  "question": "问题内容",
  "options": ["A. 选项1", "B. 选项2", "C. 选项3", "D. 选项4"],
  "answer": 0
}
```
- `question`：问题文本
- `options`：选项数组（通常 A-D）
- `answer`：正确答案索引（从 0 开始）

**使用场景**：
- 发布答题活动
- 社区互动
- 知识竞赛

---

#### 5. `/add_sensitive <word>` - 添加敏感词

**用途**：添加敏感词到过滤列表

**使用方法**：
```
/add_sensitive 广告
```

**参数说明**：
- `<word>`：要添加的敏感词

**功能说明**：
- 添加到 `sensitive_words.txt` 文件
- 群组消息包含敏感词会被自动删除
- 删除后会发送警告消息（15 秒后自动删除）
- 如果敏感词已存在会提示

**使用场景**：
- 过滤广告
- 过滤不当内容
- 维护群组秩序

---

### 数据导出

#### 6. `/export_users` - 导出用户数据

**用途**：导出所有用户数据为 CSV 文件

**使用方法**：
```
/export_users
```

**导出内容**：
- Telegram ID
- 最后签到时间
- 积分
- 币安 UID
- X 账号
- 社区账户地址
- 邀请人 ID
- 是否加入群组
- 姓名
- 自定义 ID
- 最后奖励日期
- 解锁积分

**使用场景**：
- 数据分析
- 备份数据
- 生成报告

---

#### 7. `/export_submissions` - 导出提交数据

**用途**：导出所有用户提交的活动链接

**使用方法**：
```
/export_submissions
```

**导出内容**：
- Telegram ID
- 提交类型（币安/Twitter）
- 链接
- 活动 ID
- 提交时间

**使用场景**：
- 审核提交内容
- 统计活动参与度
- 数据备份

---

#### 8. `/export_submissions_by_campaign <campaign_id>` - 按活动导出提交

**用途**：导出指定活动的所有提交

**使用方法**：
```
/export_submissions_by_campaign campaign001
```

**参数说明**：
- `<campaign_id>`：活动 ID（从 `campaigns.json` 中定义）

**使用场景**：
- 审核特定活动提交
- 活动数据统计

---

#### 9. `/export_feedback` - 导出反馈数据

**用途**：导出所有用户反馈

**使用方法**：
```
/export_feedback
```

**导出内容**：
- 用户 ID
- 反馈内容
- 反馈时间

**使用场景**：
- 查看用户反馈
- 问题处理
- 数据分析

---

#### 10. `/export_month_rank <YYYY-MM>` - 导出月度排行榜

**用途**：导出指定月份的积分排行榜

**使用方法**：
```
/export_month_rank 2025-01
```

**参数说明**：
- `<YYYY-MM>`：月份格式，如 `2025-01`

**导出内容**：
- 用户排名
- Telegram ID
- 积分
- 快照时间

**使用场景**：
- 月度报告
- 奖励发放
- 数据分析

---

### 配置管理

#### 11. 上传配置文件

**用途**：上传各种配置文件更新机器人功能

**支持的文件类型**：

1. **`campaigns.json`** - 活动配置
   ```json
   [
     {
       "id": "campaign001",
       "title": "活动标题",
       "desc": "活动描述",
       "deadline": "2025-12-31"
     }
   ]
   ```

2. **`faq.json`** - FAQ 配置
   ```json
   {
     "categories": [
       {
         "title": "分类标题",
         "questions": [
           {
             "q": "问题",
             "a": "答案"
           }
         ]
       }
     ]
   }
   ```

3. **`quiz_bank.json`** - 题库配置
   ```json
   [
     {
       "question": "问题",
       "options": ["A. 选项1", "B. 选项2"],
       "answer": 0
     }
   ]
   ```

**使用方法**：
1. 准备 JSON 文件
2. 在私聊中发送文件给机器人
3. 机器人会自动验证格式并更新

**使用场景**：
- 更新活动列表
- 更新 FAQ
- 更新题库

---

### 其他管理功能

#### 12. `/search_user <keyword>` - 搜索用户

**用途**：根据关键词搜索用户信息

**使用方法**：
```
/search_user 123456789
/search_user username
```

**搜索范围**：
- Telegram ID
- 用户名（username）
- 自定义 ID（custom_id）
- 姓名

**显示内容**：
- 匹配的用户列表
- 每个用户显示：ID、姓名、积分、解锁积分

**使用场景**：
- 查找用户信息
- 用户管理
- 问题排查

---

#### 13. `/get_group_id` - 获取群组 ID

**用途**：获取当前群组的 ID（用于配置）

**使用方法**：
```
/get_group_id
```

**功能说明**：
- 在群组中使用
- 返回群组 ID 并打印到服务器日志
- 用于配置 `ALLOWED_GROUP_ID`

**使用场景**：
- 配置机器人
- 设置允许的群组

---

#### 14. `/draw <count> <id_list>` - 抽奖功能

**用途**：从指定用户列表中随机抽取获奖者

**使用方法**：
```
/draw 3 1001,1002,1003,1004,1005
```

**参数说明**：
- `<count>`：要抽取的数量
- `<id_list>`：用户 ID 列表，用逗号分隔

**功能说明**：
- 显示抽奖动画
- 随机选择指定数量的用户
- 不重复选择（无放回）
- 如果请求数量大于候选数量，会抽取所有候选

**使用场景**：
- 活动抽奖
- 随机选择
- 社区活动

---

#### 15. `/faq_reload` - 重新加载 FAQ

**用途**：重新加载 FAQ 配置文件（无需重启机器人）

**使用方法**：
```
/faq_reload
```

**功能说明**：
- 重新读取 `faq.json` 文件
- 更新 FAQ 内容
- 无需重启机器人

**使用场景**：
- 更新 FAQ 后立即生效
- 测试 FAQ 配置

---

#### 16. `/news` - 手动触发新闻广播

**用途**：手动触发新闻广播（如果启用了新闻功能）

**使用方法**：
```
/news
```

**功能说明**：
- 立即执行新闻获取和广播
- 需要 `NEWS_ENABLED` 为 `true`
- 从 `rss_sources.json` 读取新闻源

**使用场景**：
- 测试新闻功能
- 手动发布新闻

---

## 功能说明

### 积分系统

#### 积分类型
1. **总积分**：用户的所有积分，包括：
   - 签到获得
   - 答题获得
   - 聊天获得
   - 邀请奖励
   - 管理员添加

2. **解锁积分**：可以用于转账的积分
   - 通过 `/unlock_points` 从总积分解锁
   - 管理员可以直接添加
   - 用于转账和红包

#### 积分获得方式
1. **每日签到**：发送签到词获得基础积分
2. **连续签到**：连续 7 天签到获得额外奖励
3. **聊天积分**：在群组中聊天获得（有冷却时间）
4. **答题奖励**：答对题目获得积分
5. **邀请奖励**：被邀请人首次签到，邀请人获得奖励
6. **管理员添加**：管理员手动添加积分

#### 积分使用
1. **转账**：转给其他用户
2. **红包**：发送红包分享积分
3. **排行榜**：参与积分和活跃度排名

#### 红包积分说明
- 发送红包需要使用解锁积分
- 红包未领完时，剩余积分会在过期后自动退回
- 退回的积分会添加到发包人的解锁积分中
- 确保积分不会丢失

---

### 签到系统

#### 签到流程
1. 机器人每天在指定时间（`SIGNIN_WORD_TIME`）发布签到词
2. 签到词从 `signin_words.txt` 随机选择
3. 用户在群组中发送匹配的签到词
4. 机器人验证并奖励积分
5. 签到词会被置顶 5 分钟

#### 签到奖励
- **基础奖励**：每次签到获得 `SIGNIN_POINTS` 积分
- **连续奖励**：连续 7 天签到获得 `SIGNIN_BONUS_POINTS` 额外积分
- **邀请奖励**：被邀请人首次签到，邀请人获得 `INVITE_REWARD_POINTS` 积分

---

### 活动系统

#### 活动配置
活动通过 `campaigns.json` 文件配置：
```json
[
  {
    "id": "campaign001",
    "title": "活动标题",
    "desc": "活动描述",
    "deadline": "2025-12-31"
  }
]
```

#### 提交流程
1. 用户使用 `/submit` 选择活动
2. 选择提交类型（币安/Twitter）
3. 输入链接
4. 确认提交
5. 每个活动每个类型只能提交一次

---

### 敏感词过滤

#### 功能说明
- 自动检测群组消息中的敏感词
- 包含敏感词的消息会被自动删除
- 发送警告消息（15 秒后自动删除）
- 敏感词列表保存在 `sensitive_words.txt`

#### 管理方式
- 管理员使用 `/add_sensitive <word>` 添加
- 直接编辑 `sensitive_words.txt` 文件

---

### 定时任务

#### 新闻广播
- **时间**：`NEWS_BROADCAST_TIME`（默认 09:00）
- **功能**：从 RSS 源获取新闻并广播
- **开关**：`NEWS_ENABLED`

#### 签到词发布
- **时间**：`SIGNIN_WORD_TIME`（默认 09:05）
- **功能**：选择并发布每日签到词
- **开关**：`SIGNIN_WORD_ENABLED`

#### 价格更新
- **时间**：`PRICE_UPDATE_TIME`（默认 00:00）
- **功能**：更新每日开盘价格

#### 价格广播
- **间隔**：`PRICE_BROADCAST_INTERVAL_HOURS`（默认 2 小时）
- **功能**：广播价格变化
- **开关**：`PRICE_BROADCAST_ENABLED`

#### 红包退回检查
- **时间**：`REDPACKET_REFUND_TIME`（默认 01:00）
- **功能**：检查过期红包并将剩余积分退回给发包人
- **说明**：每天自动执行，处理超过 24 小时未领完的红包

---

## 配置说明

### 配置文件：`config.jsonc`

#### 基础配置
- `BOT_TOKEN`：Telegram Bot Token
- `ADMIN_IDS`：管理员 Telegram ID 列表
- `ALLOWED_GROUP_ID`：允许操作的群组 ID

#### 积分配置
- `SIGNIN_POINTS`：每日签到积分（默认 1）
- `SIGNIN_BONUS_POINTS`：连续 7 天签到奖励（默认 2）
- `QUIZ_CORRECT_POINTS`：答题正确积分（默认 1）
- `CHAT_POINTS`：聊天积分（默认 0，0 表示禁用）
- `INVITE_REWARD_POINTS`：邀请奖励积分（默认 3）

#### 定时任务配置
- `NEWS_ENABLED`：是否启用新闻广播
- `SIGNIN_WORD_ENABLED`：是否启用签到词功能
- `PRICE_BROADCAST_ENABLED`：是否启用价格广播
- `NEWS_BROADCAST_TIME`：新闻广播时间（HH:MM）
- `SIGNIN_WORD_TIME`：签到词发布时间（HH:MM）
- `PRICE_UPDATE_TIME`：价格更新时间（HH:MM）
- `PRICE_BROADCAST_INTERVAL_HOURS`：价格广播间隔（小时）
- `REDPACKET_REFUND_TIME`：红包退回检查时间（HH:MM，默认 01:00）

#### 社区信息
- `COMMUNITY_NAME`：社区名称
- `COMMUNITY_GROUP_LINK`：群组链接
- `COMMUNITY_ACCOUNT_NAME`：社区账户名称（如钱包名称）
- `DEFAULT_LANGUAGE`：默认语言（zh_CN 或 en_US）

#### API 配置
- `PRICE_API_BASE_URL`：价格 API 地址

---

### 数据文件

#### `signin_words.txt`
每日签到词列表，每行一个词，支持中英文。

#### `sensitive_words.txt`
敏感词列表，每行一个词。

#### `campaigns.json`
活动配置文件，定义可参与的活动。

#### `faq.json`
FAQ 配置文件，定义常见问题和答案。

#### `quiz_bank.json`
题库配置文件，定义答题活动的题目。

#### `rss_sources.json`
RSS 新闻源配置（如果启用新闻功能）。

#### `activities.json`
活动匹配配置，用于自动匹配用户消息。

---

## 注意事项

1. **私聊命令**：大部分用户命令只能在私聊中使用
2. **群组限制**：群组命令只能在配置的群组（`ALLOWED_GROUP_ID`）中使用
3. **管理员权限**：管理员命令需要 ID 在 `ADMIN_IDS` 中
4. **积分转账**：只能使用解锁积分进行转账
5. **签到限制**：每天只能签到一次
6. **答题限制**：每道题只能回答一次
7. **文件格式**：上传的配置文件必须是有效的 JSON 格式
8. **数据备份**：建议定期导出数据备份

---

## 技术支持

如有问题或建议，请使用 `/feedback` 命令反馈。

---

*最后更新：2025年*

